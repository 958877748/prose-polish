# AI写作助手

> 本文档由 AI 助手（Claude）基于项目开发记录生成和整理，主要面向初次使用本项目的用户和开发者。
> 
> [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## 🚀 快速开始

### 项目简介
这是一个基于大语言模型的写作辅助工具，专注于提升文字编辑和内容创作的效率。它提供了可视化的提示词编辑系统，让你能够轻松地优化和改进文章。

### 初次使用步骤
1. **安装 conda**
   - 这是唯一需要手动安装的环境依赖
   - 下载地址：[Anaconda官网](https://www.anaconda.com/download)
   - 安装完成后重启终端

2. **配置 API Key（必需）**
   - 在 [通义千问开放平台](https://help.aliyun.com/zh/model-studio/developer-reference/get-api-key) 获取 API Key
   - 启动脚本会自动帮你创建并提示配置 `config.js`

3. **启动项目**
   ```bash
   # 添加脚本执行权限
   chmod +x start.sh
   
   # 运行启动脚本
   ./start.sh
   ```
   
   启动脚本会自动：
   - 创建并配置 Node.js 环境
   - 安装所需依赖
   - 启动服务器

4. **选择启动模式并访问**
   - 完整模式（选项1）：包含前端界面和后端API服务
     - 访问地址：http://localhost:3000
     - 适用于：正常使用场景，需要AI优化功能
   
   - 前端开发模式（选项2）：仅启动前端界面
     - 访问地址：http://127.0.0.1:3000
     - 适用于：前端开发调试，AI功能不可用

### 功能预览
- ✨ 可视化提示词系统
- 📝 Markdown 导入导出
- 🎯 智能写作优化
- 🔗 文本块自由连接

### 立即尝试
我们提供了《端午的鸭蛋》这篇课文的 markdown 版本，你可以用它来体验所有功能。

## 💡 核心功能
- **提示词编辑系统**
  - 创建和编辑提示词卡片
  - 预设优化模板
  - 变量系统支持
- **文本编辑功能**
  - Markdown 格式支持
  - 自由拖拽排布
  - 可视化连接
- **智能优化**
  - 段落规范化
  - 文本衔接优化
  - 内容整体优化

想了解更多？请继续阅读下面的详细说明。

## 🎨 设计文档

### 设计理念
本项目采用类似苹果设计风格的界面，追求简洁、优雅且易用的用户体验。整个界面采用左右两栏布局：
- 左侧：提示词编辑区，包含可复用的提示词卡片
- 右侧：文档编辑区，支持自由拖拽排布文本块
- 中间：通过可视化连接线建立关联

### 界面设计要点
1. **卡片式布局**
   - 提示词卡片：浅色背景，渐变文本预览
   - 文本卡片：支持拖拽和大小调整
   - 统一的圆角和阴影效果

2. **交互设计**
   - 卡片悬停显示操作按钮
   - 拖拽时的半透明效果
   - 连接端口动画反馈
   - 清晰的按钮状态

3. **色彩系统**
   - 主色调：#007aff（按钮、重要操作）
   - 危险色：#ff3b30（删除操作）
   - 警告色：#F5B400（警告提示）
   - 成功色：#00b894（成功状态）
   - 中性色：文本、边框和背景

### 样式系统
为保持界面一致性和可维护性，我们建立了完整的样式系统：

1. **基础样式**
```css
:root {
  --color-primary: #007aff;    /* 主色调 */
  --spacing-sm: 8px;           /* 基础间距 */
  --radius-lg: 8px;            /* 卡片圆角 */
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1); /* 基础阴影 */
}
```

2. **布局系统**
   - Flexbox 布局
   - 左侧边栏固定 300px
   - 右侧内容区自适应
   - 统一的间距变量

### 文件结构
```
styles/
├── base.css          # 基础样式
│   ├── 变量定义
│   ├── 重置样式
│   └── 通用样式
│
├── layout.css        # 布局样式
│   ├── 主容器
│   ├── 侧边栏
│   └── 内容区
│
└── components/       # 组件样式
    ├── buttons.css   # 按钮样式
    ├── cards.css     # 卡片样式
    ├── dialogs.css   # 对话框样式
    └── ports.css     # 连接样式
```

### 开发者指南
1. **样式修改**
   - 主题修改：编辑 `base.css` 中的变量
   - 布局调整：修改 `layout.css`
   - 组件更新：修改 `components` 下对应文件

2. **依赖说明**
   - axios: 1.7.9
   - cors: 2.8.5
   - express: 4.21.2
   - live-server: 1.2.2

3. **API 配置**
   - 所有前端文件在根目录
   - `server.js` 处理 API 代理
   - API 密钥配置在 `script.js`

## 功能特点
- 可视化的提示词编辑系统
  - 支持创建和编辑提示词卡片
  - 提供预设的写作优化提示词模板
  - 支持提示词的变量系统，可灵活替换内容
- 文本编辑功能
  - 支持 Markdown 格式文件的导入导出
  - 支持文本块的自由拖拽排布
  - 文本块与提示词的可视化连接
- 智能写作优化
  - 支持文章段落的规范化处理
  - 支持文本衔接优化
  - 支持内容整体性优化

## 📖 使用指南

### 环境要求
- Node.js: 20.17.0
- OpenSSL: 3.0.15
- ICU: 73.1
- LibUV: 1.48.0

### 环境配置
1. **配置 Node.js 环境**
```bash
# 如果使用 conda
conda activate gai-chat-nodejs

# 如果需要安装 Node.js
conda install nodejs
```

2. **配置 API Key**
- 复制 `config.example.js` 并重命名为 `config.js`
- 在 [通义千问开放平台](https://help.aliyun.com/zh/model-studio/developer-reference/get-api-key) 获取 API Key
- 将 API Key 填入 `config.js`

### 手动启动步骤
如果你不想使用启动脚本，可以手动执行：
```bash
# 安装依赖
npm install

# 启动服务器
npm start

# 访问应用
open http://localhost:3000
```

### 常见问题解决
1. **依赖安装失败**
```bash
npm cache clean --force
npm install
```

2. **端口被占用**
修改 `server.js` 中的端口号

3. **重启服务**
```bash
# 停止服务
Ctrl + C

# 重新启动
npm start
```

### 开发模式
仅调试前端界面：
```bash
npm run dev  # 启动轻量级开发服务器，支持自动刷新
```
注意：开发模式下后端 API 不可用

## 项目文件结构

### 样式文件组织
项目采用模块化的CSS文件组织方式，所有样式文件位于 `styles/` 目录下：

```
styles/
├── base.css          # 基础样式
│   ├── CSS变量定义（颜色、间距、圆角、阴影等）
│   ├── 重置样式
│   ├── 基础样式
│   └── 通用滚动条样式
│
├── layout.css        # 布局样式
│   ├── 主容器布局
│   ├── 侧边栏布局
│   ├── 主内容区布局
│   └── 输出容器布局
│
└── components/       # 组件样式
    ├── buttons.css   # 按钮样式
    │   ├── 基础按钮
    │   ├── 图标按钮
    │   ├── 警告按钮
    │   └── 浮动按钮
    │
    ├── cards.css     # 卡片样式
    │   ├── 提示词卡片
    │   ├── 段落卡片
    │   └── 卡片操作按钮
    │
    ├── dialogs.css   # 对话框样式
    │   ├── 编辑对话框
    │   └── 文件输入包装器
    │
    └── ports.css     # 连接相关样式
        ├── 端口容器
        ├── 连接端口
        ├── 连接线
        └── 端口标签
```

### 样式设计原则
1. **变量统一管理**
   - 颜色系统：主色调、警告色、危险色等
   - 间距系统：从xs到xxl的统一间距
   - 圆角和阴影：统一的圆角和阴影定义

2. **模块化组织**
   - 每个文件职责单一
   - 相关样式集中管理
   - 便于维护和扩展

3. **命名规范**
   - 使用语义化的类名
   - 采用BEM命名方式
   - 避免样式冲突

4. **响应式设计**
   - 使用相对单位
   - 灵活的布局方案
   - 优雅的降级处理

### 样式使用说明
1. 所有样式文件都在 index.html 中按顺序引入
2. base.css 必须最先引入，它包含了基础变量定义
3. 组件样式可以根据需要按需引入
4. 修改主题色等全局样式只需修改 base.css 中的变量

## 📄 许可证

本项目采用 [MIT 许可证](LICENSE)。你可以自由地使用、修改和分发本项目，但需要保留原始许可证和版权信息。